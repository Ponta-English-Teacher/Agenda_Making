<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Working Page â€“ Agenda Preparation</title>
  <link rel="stylesheet" href="working.css" />
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="working.js" defer></script>
</head>

<body>
  <div class="container">

    <div class="topbar">
      <div>
        <p class="app-title">Agenda / Meeting Management â€“ Working Page</p>
        <p class="sub">Chair preparation â†’ Member-first preview (titles + materials only)</p>
      </div>
      <button class="btn" id="btnBackHome">â† Back to Home</button>
    </div>

    <div class="grid">

      <!-- LEFT: Working input -->
      <div class="card">
        <h2>Meeting / Agenda Input</h2>

        <div class="publish-note">Items marked here will be shown to members (JP + EN)</div>

        <!-- Compact meeting -->
        <div class="meeting-inline">
          <span class="pill">Meeting</span>
          <div class="meeting-fields">
            <label for="meetingTitle">Meeting Title (JP / EN)</label>
            <input id="meetingTitle" type="text" placeholder="26å¹´åº¦ ç¬¬ä¸€å›è‹±æ–‡å­¦ç§‘ä¼šè­° / FY2026 1st English Dept. Meeting">
            <p id="meetingIdDisplay" class="small-help" aria-live="polite"></p>
          </div>
        </div>

        <label style="margin-top:14px;">Create Agenda Item</label>

        <div class="row">
          <div>
            <label for="agendaId">Agenda ID</label>
            <input id="agendaId" type="text" placeholder="1">
          </div>
          <div>
            <label for="agendaType">Type</label>
       <select id="agendaType">
         <option value="report">å ±å‘Šãƒ»ç¢ºèªäº‹é …</option>
         <option value="discuss" selected>å¯©è­°äº‹é …</option>
         <option value="contact">é€£çµ¡äº‹é …</option>
         </select>          
         </div>
        </div>

        <label for="titleJP">Agenda Title (JP) â€»å¿…é ˆ</label>
        <input id="titleJP" type="text" placeholder="ä¾‹ï¼šç§‘ç›®ç­‰å±¥ä¿®ç”Ÿã¸ã®å…¬é–‹æˆæ¥­">

        <label for="titleEN">Agenda Title (EN) (ChatGPT translation)</label>
        <input id="titleEN" type="text" placeholder="English title (translated)">

        <label for="materialsText">Materials â€“ Text (JP + EN expected)</label>
        <textarea id="materialsText" placeholder="Paste official request / email text here (later: JP + EN)"></textarea>

        <label for="attachmentName">æ·»ä»˜ãƒ•ã‚¡ã‚¤ãƒ«åï¼ˆOneDrive è¡¨ç¤ºåï¼‰</label>
        <input id="attachmentName" type="text" placeholder="ä¾‹ï¼šè‹±æ–‡å­¦ç§‘.xlsx / ä¾é ¼çŠ¶.pdf">

        <label for="attachmentUrl">æ·»ä»˜ãƒªãƒ³ã‚¯ï¼ˆOneDrive URLï¼‰</label>
        <input id="attachmentUrl" type="text" placeholder="https://... (OneDriveã®å…±æœ‰ãƒªãƒ³ã‚¯ã‚’è²¼ã‚‹)">
        <label for="materialUrls">Material URLs (multiple)</label>
        <input id="materialUrls" type="text" placeholder="https://... (You can paste multiple URLs separated by spaces or commas)">

        <label for="suggestion">æ¡ˆï¼ˆSuggestionï¼‰</label>
        <textarea id="suggestion" placeholder="ã“ã“ã«æ¡ˆã‚’æ›¸ãï¼ˆãƒ¡ãƒ³ãƒãƒ¼ã«è¡¨ç¤ºã•ã‚Œã‚‹ï¼‰"></textarea>
        
        <label for="blueMemo">ğŸ”µ ãƒ¡ãƒ¢ï¼ˆè‡ªåˆ†ç”¨ãƒ»ãƒ¡ãƒ³ãƒãƒ¼éè¡¨ç¤ºï¼‰</label>
        <textarea id="blueMemo" placeholder="ã“ã“ã¯è‡ªåˆ†ç”¨ãƒ¡ãƒ¢ï¼ˆå¾Œã§åŸ‹ã‚ã‚‹ï¼ç¢ºèªã™ã‚‹ï¼‰"></textarea>

        <div class="actions">
          <button class="btn" id="btnClear">Clear</button>
          <button class="btn primary" id="btnAdd">Add to Agenda</button>
          <button class="btn" id="btnCancelEdit" style="display:none;">Cancel Edit</button>
          <button class="btn primary" id="btnCreateMeeting">Create Meeting</button>
          <button class="btn primary" id="btnUpdateMeeting" style="display:none;">
            Update Meeting
          </button>
          
        </div>
        <p class="hint">â€» â€œAdd to Agendaâ€ means: this item becomes visible in the Member-first preview below.</p>
        <p class="small-help" id="saveStatus" aria-live="polite"></p>
      </div>

      <!-- RIGHT: Member-first preview -->
      <div class="card">
        <div class="preview-head">
          <p class="preview-title">Agenda Items (Member-first preview)</p>
        </div>
        <p style="margin:6px 0 12px;">
         <a id="goMemberPage" href="#" style="font-weight:600;">
            ğŸ‘¥ ã“ã®ä¼šè­°ã® Member Page ã‚’é–‹ã
         </a>
        </p>

        <div class="empty" id="emptyState">
          No agenda items yet.<br>
          Add an item on the left using <b>â€œAdd to Agendaâ€</b>.<br>
          This area should show exactly what members see first: <b>Titles + Materials (files/links)</b>.
        </div>

        <div id="previewRoot"></div>

      </div>

    </div>
  </div>
</body>
</html>